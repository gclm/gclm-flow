---
description: 智能命令选择器，自动分发到合适的 gclm 命令。
---

# /gclm:auto - 智能命令路由

根据用户输入自动选择最合适的命令执行。通过语义分析和关键词匹配，智能识别用户意图并路由到对应的专业命令。

## 核心理念

- **零配置**: 用户无需记忆具体命令，描述需求即可
- **智能匹配**: 基于优先级和语义权重进行最佳匹配
- **透明执行**: 清晰展示选择逻辑，便于用户理解和调整

## 选择规则

### 优先级说明

| 优先级 | 描述 | 示例场景 |
|--------|------|----------|
| **P0** | 紧急：阻塞性问题 | 构建失败、编译错误 |
| **P1** | 高：质量保障 | 测试、审查、安全检查 |
| **P2** | 中：代码质量 | 重构、清理、优化 |
| **P3** | 低：辅助任务 | 文档、提交、问答 |
| **P4** | 默认：通用开发 | 新功能、修改 |

### 详细匹配规则

| 优先级 | 关键词 | 命令 | 适用场景 |
|--------|--------|------|----------|
| P0 | 构建失败、build fail、类型错误、编译错误、tsc 报错、npm run build 失败 | `/gclm:fix` | 项目无法编译、构建失败、运行时错误 |
| P1 | 测试、test、unit test、pytest、jest、vitest、go test | `/gclm:test` | 运行测试、检查测试覆盖率 |
| P1 | 审查、review、检查代码、code review、代码质量、安全检查 | `/gclm:review` | 代码审查、安全扫描、质量评估 |
| P2 | 重构、refactor、清理、优化、死代码、重复代码 | `/gclm:do` | 代码重构、结构优化 |
| P3 | 文档、docs、README、注释、API 文档 | `/gclm:doc` | 更新文档、生成 API 文档 |
| P3 | 提交、commit、git commit、推送 | `/gclm:commit` | 生成提交信息、执行提交 |
| P3 | 问、查询、怎么、如何、为什么 | `/gclm:ask` | 代码问答、技术问题 |
| P4 | 实现、开发、功能、feature、新增、修改（默认兜底） | `/gclm:plan` + `/gclm:do` | 新功能开发、现有功能修改 |

## 执行步骤

### 1. 分析意图
- 对用户输入进行分词和语义解析
- 提取核心关键词和动作词
- 识别技术术语和上下文线索

### 2. 匹配命令
- 按优先级从高到低遍历规则表
- 计算每条规则的匹配分数
- 选择得分最高且优先级最高的命令

### 3. 显示结果
- 清晰展示选中的命令
- 说明选择原因和匹配的关键词
- 提供备选命令供用户参考

### 4. 执行命令
- 调用对应命令的完整流程
- 传递用户原始输入作为参数

## 输出格式

```
📊 智能命令选择

🎯 **已选择**: `/gclm:[命令]`
📝 **原因**: [详细的选择原因说明]
🔍 **关键词**: [匹配的关键词列表]
💡 **备选**: [其他可能相关的命令]

---
⏳ 正在执行 `/gclm:[命令]` ...
```

## 使用示例

### 构建错误
```
/gclm:auto npm run build 报错了

🎯 **已选择**: `/gclm:fix`
📝 **原因**: 检测到构建失败，这是 P0 级阻塞性问题
🔍 **关键词**: "build"、"报错"
```

### 代码审查
```
/gclm:auto 帮我检查一下这段代码有没有安全问题

🎯 **已选择**: `/gclm:review`
📝 **原因**: 用户要求代码检查和安全分析
🔍 **关键词**: "检查"、"安全问题"
```

### 新功能开发
```
/gclm:auto 添加用户登录功能

🎯 **已选择**: `/gclm:plan`
📝 **原因**: 检测到新功能开发需求，需先制定实现计划
🔍 **关键词**: "添加"、"功能"、"登录"
💡 **备选**: `/gclm:do`（如果已有计划可直接执行）
```

## 相关命令

| 命令 | 用途 |
|------|------|
| `/gclm:init` | 初始化项目 |
| `/gclm:plan` | 任务规划 |
| `/gclm:do` | 执行任务 |
| `/gclm:review` | 代码审查 |
| `/gclm:test` | 运行测试 |
| `/gclm:fix` | 修复问题 |
| `/gclm:doc` | 文档管理 |
| `/gclm:ask` | 智能问答 |
| `/gclm:learn` | 记忆管理 |
| `/gclm:commit` | 智能提交 |
