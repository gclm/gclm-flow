---
name: code-review
description: |
  代码审查技能。当用户要求代码审查、review、检查代码、安全检查、质量检查、verify、验证时自动触发。
  包含：(1) 代码质量检查 (2) 安全性检查 (3) 性能检查 (4) 设计验证
metadata:
  author: gclm-flow
  version: "2.0.0"
  platforms:
    - claude-code
    - codex-cli
  tags:
    - review
    - quality
    - security
    - verify
---

# 代码审查

执行全面的代码质量检查和设计验证。

## 审查类型

### 1. 代码审查

| 维度 | 检查项 |
|------|--------|
| **代码质量** | 可读性、可维护性、可测试性、代码复用 |
| **安全性** | 输入验证、认证授权、敏感数据、SQL 注入、XSS |
| **性能** | 算法效率、资源管理、缓存策略、数据库查询 |
| **规范** | 编码规范、最佳实践、项目约定 |

### 2. 设计验证

对照设计文档验证实现完整性：
- 读取设计文档
- 检查项目结构
- 对比分析差异

## 工作流程

### 代码审查流程

1. 获取 git diff
2. 识别修改范围
3. 多维度审查
4. 生成报告

### 设计验证流程

1. 解析设计文档
2. 扫描实际结构
3. 对比分析

| 状态 | 描述 |
|------|------|
| ✅ 符合 | 与设计一致 |
| ⚠️ 缺失 | 设计中有但实现中没有 |
| ➕ 多余 | 实现中有但设计中没有 |

## 输出格式

### 代码审查报告

```markdown
# 代码审查报告

## 概述
- 审查文件: X 个
- 发现问题: Y 个

## 问题列表

### 严重 (X 个)
1. **[文件:行号]** 问题描述
   - 建议: ...

### 警告 (Y 个)
1. ...

### 建议 (Z 个)
1. ...
```

### 设计验证报告

```markdown
# 设计验证报告

## 概述
- 符合: X 项
- 缺失: Y 项
- 多余: Z 项
- 符合率: N%

## 详细报告

### 目录结构
| 设计路径 | 实际状态 |
|----------|----------|
| src/handlers/ | ✅ |
| src/services/ | ⚠️ 缺失 |

## 建议
1. [修复建议]
```

## 选项

- `--security`: 只进行安全审查
- `--performance`: 只进行性能审查
- `--fix`: 自动修复可修复的问题
- `--json`: 输出 JSON 格式

## 相关技能

- `testing` - 运行测试验证
- `gclm` - fix 工作流
